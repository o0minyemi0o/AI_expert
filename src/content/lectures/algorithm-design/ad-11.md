# NP-완전 문제 모음

## 왜 NP-완전 문제들을 알아야 하는가

ad-10에서 NP-완전의 이론을 다뤘다면, 이 강의에서는 **핵심 NP-완전 문제들의 구체적 환원**을 다룹니다. 새 문제가 NP-완전임을 증명하려면 기존 NP-완전 문제에서 환원해야 하는데, 어떤 문제에서 환원하느냐에 따라 증명 난이도가 크게 달라집니다. "환원의 도구 상자"를 갖추는 것이 목표입니다.

> **핵심 직관**: 환원의 핵심은 **"출발 문제의 구조를 목표 문제의 구조에 매핑"**하는 것입니다. 그래프 문제는 그래프 문제에서, 수 문제는 수 문제에서 환원하는 것이 자연스럽습니다. 3-SAT은 가장 범용적인 출발점이지만, 목표에 따라 적절한 문제를 선택하면 증명이 훨씬 간결해집니다.

## 1. 3-SAT

```
3-SAT:
  각 절(clause)이 정확히 3개의 리터럴인 CNF 수식의
  만족 가능성 판별

  φ = (x₁ ∨ ¬x₂ ∨ x₃) ∧ (¬x₁ ∨ x₂ ∨ ¬x₃) ∧ ...

  NP-완전 (Cook-Levin + SAT → 3-SAT 환원)

  SAT → 3-SAT 환원:
  긴 절을 3-리터럴 절로 분해
  (a ∨ b ∨ c ∨ d) →
  (a ∨ b ∨ y₁) ∧ (¬y₁ ∨ c ∨ d)
  새 변수 y₁ 도입, 등가 보존

  2-SAT은 P (ga-06)! 리터럴 수 3이 경계

  3-SAT의 중요성:
  - 가장 범용적인 환원 출발점
  - 변수=선택, 절=제약 으로 자연스럽게 매핑
  - 대부분의 NP-완전 증명이 3-SAT에서 시작
```

## 2. 그래프 문제: Clique, Independent Set, Vertex Cover

```
Clique 문제:
  그래프 G에 크기 k인 완전 부분 그래프(클리크)가 존재하는가?

  3-SAT → Clique 환원:
  m개 절, 각 절에서 리터럴 하나씩 → 노드
  같은 절의 노드끼리 간선 없음 (최대 1개 선택)
  모순 리터럴 쌍 간선 없음 (x와 ¬x 동시 불가)
  나머지 모든 쌍에 간선

  크기 m의 클리크 존재 ⟺ 모든 절에서 참인 리터럴 선택 가능
  ⟺ 3-SAT 만족 가능

Independent Set (독립 집합):
  서로 인접하지 않는 노드 k개

  Clique → Independent Set: 보그래프(complement graph)
  G에서 크기 k 클리크 ⟺ G̅에서 크기 k 독립 집합

Vertex Cover (정점 커버):
  모든 간선의 적어도 한 끝점 포함하는 최소 노드 집합

  Independent Set → Vertex Cover: 여집합
  크기 k 독립 집합 ⟺ 크기 (n-k) 정점 커버
  (독립 집합의 여집합이 정점 커버)
```

```
환원 체인:

  3-SAT → Clique → Independent Set → Vertex Cover

  한 방향으로 흐르지만, 각각 독립적 증명도 가능
  3-SAT → Independent Set 직접 환원이 가장 깔끔

  이분 그래프에서:
  Independent Set, Vertex Cover 모두 P!
  → König의 정리 (ga-05)
  일반 그래프에서만 NP-완전
```

## 3. Hamiltonian Cycle과 TSP

```
Hamiltonian Cycle:
  모든 노드를 정확히 한 번 방문하는 사이클 존재?

  NP-완전 (3-SAT 또는 Vertex Cover에서 환원)

  환원 아이디어 (3-SAT → Hamiltonian Cycle):
  변수별 "선택 가젯": 경로를 왼→오(True) 또는 오→왼(False)
  절별 "검증 가젯": 참인 리터럴의 경로가 통과
  → 해밀턴 사이클 존재 ⟺ 만족 할당 존재

  vs 오일러 회로:
  오일러: 모든 간선을 한 번씩 → P (차수 조건만 확인)
  해밀턴: 모든 노드를 한 번씩 → NP-완전
  → "간선" vs "노드"의 차이가 P/NP-완전을 가름!

TSP (결정 버전):
  비용 ≤ k인 해밀턴 사이클 존재?

  Hamiltonian Cycle → TSP:
  간선 있으면 거리 1, 없으면 거리 2
  비용 ≤ n인 TSP 존재 ⟺ 해밀턴 사이클 존재
```

> **핵심 직관**: 오일러 회로(P)와 해밀턴 사이클(NP-완전)의 극적인 차이는 **"지역 조건 vs 전역 조건"**의 차이입니다. 오일러 회로는 각 노드의 차수(지역)만 확인하면 되지만, 해밀턴 사이클은 "이미 방문한 노드"라는 전역 상태를 추적해야 합니다.

## 4. Subset Sum과 배낭

```
Subset Sum:
  집합 S = {s₁, ..., sₙ}에서 합이 정확히 T인 부분집합 존재?

  NP-완전 (3-SAT에서 환원 가능, 또는 직접 증명)

  3-SAT → Subset Sum 환원 (개요):
  각 변수/절에 대응하는 수를 자릿수로 인코딩
  → 합이 특정 값 ⟺ 모든 절 만족

  "약한 NP-완전" (Weakly NP-Complete):
  T가 다항식 크기이면 DP로 O(NT) — 의사 다항 시간
  T가 지수적이면 NP-완전이 본격화
  → FPTAS 가능 (ad-07)

Partition 문제:
  집합을 합이 같은 두 부분집합으로 나눌 수 있는가?
  Subset Sum의 특수 경우: T = (총합)/2

0/1 Knapsack (결정):
  가치 합 ≥ V이면서 무게 합 ≤ W인 부분집합 존재?
  Subset Sum → Knapsack 환원 가능
```

```
강한 NP-완전 vs 약한 NP-완전:

  약한 NP-완전: 수 크기가 입력의 핵심
  ├─ Subset Sum: O(NT) 의사 다항 → FPTAS 있음
  ├─ Partition: 동일
  └─ 수가 unary로 표현되면 P

  강한 NP-완전: 수 크기와 무관하게 어려움
  ├─ 3-Partition: 3개씩 묶어 합이 같게
  ├─ 3-SAT, Clique, TSP
  └─ FPTAS 불가능 (P ≠ NP 시)
```

## 5. Set Cover와 그래프 색칠

```
Set Cover:
  전체 집합 U를 덮는 최소 개수의 부분집합 선택
  Vertex Cover → Set Cover 환원 가능

  Vertex Cover는 Set Cover의 특수 경우:
  각 간선 = 원소, 각 노드 = 자신에 연결된 간선 집합
  → 근사: 그리디 O(ln n) (ad-07)

Graph Coloring:
  인접 노드가 같은 색이 아닌 최소 색 수

  2-Coloring: P (이분 그래프 판별, ga-01)
  3-Coloring: NP-완전! (3-SAT에서 환원)

  3-SAT → 3-Coloring 환원:
  True, False, Base 색상 사용
  가젯(gadget)으로 논리 구조를 그래프에 인코딩
  → 3-색 칠하기 가능 ⟺ 3-SAT 만족 가능
```

## 6. 환원 전략 가이드

```
새 문제의 NP-완전 증명 전략:

  1. NP 소속 증명 (보통 쉬움):
     "이 증거(certificate)를 O(f(n))에 검증"

  2. 적절한 출발 문제 선택:
     ├─ 논리/제약 → 3-SAT
     ├─ 그래프 구조 → Clique, Independent Set, Vertex Cover
     ├─ 경로/회로 → Hamiltonian Cycle
     ├─ 수/배낭 → Subset Sum, Partition
     └─ 커버 → Set Cover, Vertex Cover

  3. 가젯 설계:
     출발 문제의 각 구성 요소를 목표 문제의 구조로 매핑
     "변수 가젯", "절 가젯", "연결 가젯" 등

  4. 동치 증명:
     출발 YES ⟹ 목표 YES (순방향)
     목표 YES ⟹ 출발 YES (역방향)
     둘 다 증명해야 완전!

  흔한 실수:
  - 환원 방향 오류 (쉬운 → 어려운이 아닌 반대)
  - NP 소속 증명 누락
  - 가젯이 다항 크기가 아닌 경우
```

> **핵심 직관**: 좋은 환원은 **"구조적 유사성"**에 기반합니다. 선택/제약 구조 → 3-SAT, 그래프 구조 → Clique/IS, 경로 구조 → Hamiltonian, 수 구조 → Subset Sum. 목표 문제와 가장 유사한 출발 문제를 고르면 환원이 자연스럽습니다.

| 환원 출발 | 적합한 목표 | 핵심 매핑 |
|----------|-----------|----------|
| 3-SAT | 대부분 | 변수=선택, 절=제약 |
| Clique | 그래프 밀도 | 완전 부분 그래프 |
| Independent Set | 독립 선택 | 비인접 선택 |
| Vertex Cover | 커버 문제 | 간선 커버 |
| Hamiltonian | 경로/순회 | 전체 방문 |
| Subset Sum | 수/합 문제 | 부분합 = 목표 |

NP-완전 문제 모음은 ad-10의 이론을 구체화하며, ad-07의 근사 알고리즘이 각 문제별 최선의 실용적 대안을 제공합니다. ga-06의 2-SAT(P)은 3-SAT(NP-완전)과의 경계를 보여줍니다.

## 핵심 정리

- **3-SAT**은 가장 범용적 환원 출발점이며, 변수=선택, 절=제약으로 대부분의 문제에 매핑됩니다
- **Clique → Independent Set → Vertex Cover** 체인은 보그래프와 여집합으로 연결되며, 이분 그래프에서는 모두 P입니다
- **해밀턴 사이클**은 "모든 노드 한 번 방문"이 NP-완전이고, **오일러 회로**의 "모든 간선 한 번"은 P라는 극적 차이를 보입니다
- **Subset Sum**은 약한 NP-완전으로 의사 다항 시간 $O(NT)$ DP가 있고 FPTAS가 가능하지만, 강한 NP-완전 문제에는 불가능합니다
- 환원의 핵심은 **"출발 문제와 구조적으로 유사한 문제 선택"** + **"가젯으로 구조 매핑"** + **"양방향 동치 증명"**입니다
